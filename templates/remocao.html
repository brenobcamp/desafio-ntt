{% extends 'base.html' %}

{% block title %}CRUD de Insetos - Remoção{% endblock %}

{% block main %}

  <div class="container mt-5">
    <h2>Remoção de Insetos</h2>
    <table class="table table-striped">
      <thead>
        <tr>
          <th>Nome Comum</th>
          <th>Nome Científico</th>
          <th>Ordem</th>
          <th>Imagem</th>
          <th>Ação</th>
        </tr>
      </thead>
      <tbody id="insetos-lista">
        <!-- Insetos serão preenchidos aqui -->
      </tbody>
    </table>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  <script>
    // Função para carregar os insetos e preencher a tabela de remoção
function loadInsetos() {
  const insetosLista = document.getElementById('insetos-lista');

  // Simular uma lista de insetos
  const insetos = [
    { id: 1, nomeComum: 'Borboleta', nomeCientifico: 'Lepidoptera', ordem: 'a', imagem: 'borboleta.jpg' },
    { id: 2, nomeComum: 'Abelha', nomeCientifico: 'Hymenoptera', ordem: 'b', imagem: 'abelha.jpg' },
    { id: 3, nomeComum: 'Formiga', nomeCientifico: 'Formicidae', ordem: 'c', imagem: 'formiga.jpg' },
  ];
  

  // Limpar o conteúdo existente
  insetosLista.innerHTML = '';

  // Preencher a tabela com os insetos
  insetos.forEach((inseto) => {
    const row = document.createElement('tr');

    const nomeComumCell = document.createElement('td');
    nomeComumCell.textContent = inseto.nomeComum;
    row.appendChild(nomeComumCell);

    const nomeCientificoCell = document.createElement('td');
    nomeCientificoCell.textContent = inseto.nomeCientifico;
    row.appendChild(nomeCientificoCell);

    const ordemCell = document.createElement('td');
    ordemCell.textContent = inseto.ordem;
    row.appendChild(ordemCell);

    const imagemCell = document.createElement('td');
    const imagem = document.createElement('img');
    imagem.className = 'inseto-img';
    imagem.src = inseto.imagem;
    imagem.alt = inseto.nomeComum;
    imagemCell.appendChild(imagem);
    row.appendChild(imagemCell);

    const acaoCell = document.createElement('td');
    const btnRemover = document.createElement('button');
    btnRemover.className = 'btn btn-danger btn-remover';
    btnRemover.textContent = 'Remover';
    btnRemover.dataset.insetoId = inseto.id;
    acaoCell.appendChild(btnRemover);
    row.appendChild(acaoCell);

    insetosLista.appendChild(row);
  });
}

// Função para lidar com o clique no botão de remoção
function handleRemoverClick(event) {
  const insetoId = event.target.dataset.insetoId;

  // Simular a remoção do inseto do servidor
  console.log('Inseto removido:', insetoId);

  // Atualizar a tabela de remoção
  loadInsetos();
}

// Adicionar um evento de clique aos botões de remoção
document.addEventListener('click', function(event) {
  if (event.target && event.target.classList.contains('btn-remover')) {
    handleRemoverClick(event);
  }
});

// Chamar a função de carregamento de insetos quando a página carregar
window.addEventListener('load', loadInsetos);

    
  </script>
{% endblock %}